# 3 дз
__________________________________________________
"npm run changeCatsToContacts" - или 3 дз,
начиная с 3 дз вам почти все, что нужно для выполнения дз будут показывать на уроке, - просто сами вы это не напишите, или если и напишите, то далеко не за неделю. По этому моих пояснений будет становится меньше, ибо как делать дз и так на уроке показывают.\
**Так же большая просьба!!!**
С 3 дз у Вас появится файл - .env и он находится в .gitignore. И не надо мне, в переживаниях, что я не смогу проверить дз, его заливать на гит, ок?
у меня честно тоже есть база на Аталасе, я могу спокойно создать свой .env в каждом вашем проекте со своими данными и я подключаюсь к своей чистой коллекции, каждый раз зачищаю. И спокойненько могу потестить ваш код ))
Меня же не инетерсует именно содержимое ВАШЕЙ конекретной базы. Мне надо что бы ваш код был работоспособный. Была правильная архитектура приложения, ну и что бы он был визуально "нормальный" (еслинт и т.д.)
Если меня что-то смущает в конертной работе, то я стучусь к студенту в личку и прошу именно его содержимое .env файла, что бы подключится к его базе, но такое бывает редко, обычно только если есть какие-то ошибки, которые студент сам не может отловить, и я помогаю с решением ошибок

__________________________________________________
## Работа с БД - функции
Немного позанудничаю.
Если вы это уже поняли, то просто пропускаем и можно не читать. Но если вы не совсем разобрались. То давайте разберемся с функциями
Функции обращения к БД в названии которых есть слово One - были созданы для работы с любыми полями, но обычно с любым другим кроме поля **_id**.
Для работы с полем ** _id** есть специальные функции в названии которых уже содержится слово **ById** что позволяет немного сократить синтаксис обращения к БД
Начнем с первого варианта который я встерчала в некоторых дз -
**findOne({ _id: id })** - тут вызывается функция - в названии которой используется - One -  в этой функции явно не указывается конкретное поле, по которому идет поиск в БД, по этому надо явно указывать название поля _id и значение которое передается - id  - ({ _id: id })
**updateOne({ _id: id }, { token })** - тут тоже самое, в названии есть слово One и тут явно передается название поля _id по которому идет поиск и потом явно передаешь значение этого поля id
**findOneAndUpdate({ _id: id },  { subscription },  { new: true } )** - аналогично.
НО ЭТО ВСЕ МОЖНО УПРОСТИТЬ НА ЧУТЬ-ЧУТЬ
_____________________________________________________________
Что бы не передавать явно указанное название поля - _id можно использовать функции, в названии которых уже содержится слово id. Это специальные - именованные функции для поиска по полю id, а именно
`Model.findById()`
`Model.findByIdAndDelete()`
`Model.findByIdAndRemove()`
`Model.findByIdAndUpdate()`
тут везде явно указывается название поля, по которому будет  производится поиск по базе данных - ById
по этому тут можно сразу передавать значение по которому происходит поиск - в этом примере мы его передаем в переменной - id
**НО даже когда используются функции в названии которых уже явно указывается слово ById , по которому идет поиск в БД, все равно используется синтаксис, как будуд-то вызыватеся функция с записью** -  **One **
В двух ДЗ видела вот такую запись  -
```javascript
 const result = await Contact.findByIdAndUpdate({ _id: contactId },
    { ...body },
    { new: true },
  )
```
 Вот ссылка на официальную документацию, где показывается, как передаются аргументы - https://mongoosejs.com/docs/api/model.html#model_Model.findByIdAndUpdate
если вы используете **findByIdAndUpdate** достаточно сразу передавать **id** , не надо конкретизировать какое поле вы передаете - `{ _id: id }` - `findByIdAndUpdate( id, ...body, { new: true } )`
или если вы хотите явно указывать поле, по которому вы обращаетесь с БД, то можно использовать `findOneAndUpdate( { _id: id }, ...body, { new: true })` - и тут надо явно указывать по какому полю мы ищем элемент.
____________________________________
И такая же ситуация и с функцией удаления.
```javascript
const result = await Contact.findByIdAndRemove({ _id: contactId })
```
 Вот ссылка на официальную документацию, где показывается, как передаются аргументы - https://mongoosejs.com/docs/api/model.html#model_Model.findByIdAndDelete
`findByIdAndRemove(id) `- не надо передавать { _id: id }, вы и так уже объявили, по какому полю ищите
_______________________________________________________________

3дз -  очень может не помешать проверка на правильность введенного id в роутах
Проверку можно делать через Joi - есть специальная доп-библиотека для проверки, используется в связе с с Joi
или можете через монгус
Build In Solution > Mongoose 5.7.12
If you are using Mongoose, we can test whether a String is of 12 bytes or a string of 24 hex characters by using mongoose build-in isValidObjectId.
`mongoose.isValidObjectId(string); /* will return true/false */`

__________________________________________________
А еще вы уже большие, и по этому -
А давайте вы начнете красиво оформлять сам файл Readme.md - Что значит красиво? - файл должен содержать краткую информацию о том, что это за проект, как его запустить. и что он умеет делать - на какие роуты каую информацию можно получить. Возможный пример - https://github.com/HackerNews/API - не обязательно так красиво, но это что бы было куда стремится.
https://medium.com/astrolabe/%D0%BA%D0%B0%D0%BA-%D0%BD%D0%B0%D0%BF%D0%B8%D1%81%D0%[…]-%D1%85%D0%BE%D1%80%D0%BE%D1%88%D0%B8%D0%B9-readme-159f88076b26
http://webdesign.ru.net/article/pravila-oformleniya-fayla-readmemd-na-github.html
_______________________________________________________________
### Архитектура приложений MVC и REST
я не нашла так, что бы было хорошо описано в одном источнике.
Проблема в том, что часто пишут таким языком, что бы понять это, надо уже знать это - по этому скину 3 статьи - если постараться прочитать их то по идее в голове из кусочков должно сформироваться представление о том, что хотели этим сказать - MVC
https://dev.to/eaetukudo/understanding-mvc-pattern-in-nodejs-2bdn - об архитектуре - модель, представление, контроллер - (хорошо и с примером кода, что и где должно лежать по папочкам)
https://habr.com/ru/company/ruvds/blog/333856/ - на примере абстрактных функций
https://ruseller.com/lessons.php?id=666 - тут проблема в том. что они на примере пхп обьясняют, но я думаю будет понятно
https://metanit.com/web/nodejs/7.1.php - и на примере чистой ноды
А вот тут только единственное место, где не плохо об рахитектуре - REST API
https://webdraftt.com/tutorial/nodejs/rest-api - общая инфа, и
https://webdraftt.com/tutorial/nodejs/app-structure - а вот тут уже именно об архитектуре

_______________________________________________________________
### Допольнительный материал - видео по Node.js 
если есть желание углубится в ноду,  - в предложенных курсах будет и то, что вам будут рассказывать в след. лекциях, и что-то дополнительно. 
 Можете и покодить и посмотреть доп-инфу 
- https://www.youtube.com/watch?v=thWNUby1G3U&list=PLC3y8-rFHvwhco_O8PS1iS9xRrdVTvSIz&index=2 - хороший курс, вот тут с 1 по 10 тему, это объяснение базы, на которой строится нода, очень советую посмотреть и разобраться. 
- https://www.youtube.com/watch?v=ob9qRQeajA0&list=PL0lO_mIqDDFX0qH9w5YQIDV6Wxy0oawet - курс на русском. без такого глубокого погружения. но тоже много полезного :ленивец:
- Три курса по основам ноды от одного автора, от совсем основ, до построения корзины и АPI - мне он нравится очень просто и понятно излагает
-https://www.youtube.com/watch?v=65a5QQ3ZR2g&list=PL55RiY5tL51oGJorjEgl6NVeDbx_fO5jR - Node.js - Tutorial - Introduction
https://www.youtube.com/watch?v=-3vvxn78MH4&list=PL55RiY5tL51rajp7Xr_zk-fCFtzdlGKUp&index=2 - NodeJS / Express / MongoDB - Build a Shopping Cart
https://www.youtube.com/watch?v=0oXYLzuucwE&list=PL55RiY5tL51q4D-B63KBnygU6opNPFk_q - What is a RESTful API? | Creating a REST API with Node.js
- https://www.youtube.com/watch?v=7f787SsgknA - понимание асинхронности в ноде. Как просиходит цикл событий. 
- Как дополнение и более глубокий разбор тем
https://www.youtube.com/watch?v=vQldMjSJ6-w&list=PLvTBThJr861y60LQrUGpJNPu3Nt2EeQsP - JWT
-  как дополнение кроме того, то есть в основных темах 
https://www.youtube.com/watch?v=_ndbCZ9Ni6E - Koa как замена Express
https://www.youtube.com/watch?v=7giZGFDGnkc&list=RDCMUCSJbGtTlrDami-tDGPUV9-w&start_radio=1 - GraphQL - как перейти к новой концепции запросов к беку
https://www.youtube.com/watch?v=ed8SzALpx1Q - GraphQL Full Course - Novice to Expert
и желательно кроме монги разобраться еще с SQL базой данных -
https://www.youtube.com/watch?v=2tDvHQCBt3w&t=4s - Работа с базами данных в Node.js на примере PostgreSQL
-  И самое  главное, что когда вы будете смотреть как кодят, на ноде у вас уже будет намотренность, и вы будешь уже интуитивно понимать как называют переменные, и как архитектуру пишут 
**По основам ноды.**
Необязательно всех авторов смотреть, я скинула нескольких, потому что обычно один автор заходит и его подача материала, а другой не заходит и не подходит его подача материала. 
Если все пересмотрите и будет скучно я Вам еще подкину, что можно глянуть - это пока основы
**Список дополнительных тем по Node.js  - ** https://docs.google.com/spreadsheets/d/1DAm9kUziEXw56CsZzEk0UsoucS_5RG5gMMNX-x-gmfc/edit#gid=379096805
